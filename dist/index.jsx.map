{
  "version": 3,
  "sources": [
    "index.jsx"
  ],
  "names": [
    "Form",
    "props",
    "inputs",
    "getInput",
    "child",
    "getDefaultValues",
    "valid",
    "value",
    "defaults",
    "dirty",
    "errorMessage",
    "type",
    "name",
    "children",
    "length",
    "x",
    "customInput",
    "state",
    "forceDirty",
    "resetForm",
    "formWasResetted",
    "input",
    "setState",
    "validate",
    "onChange",
    "extra",
    "validateObj",
    "Children",
    "map",
    "component",
    "getComponent",
    "cloneElement",
    "disabled",
    "disabledUntilFormIsValidated",
    "onClick",
    "event",
    "preventDefault",
    "getCommonMethods",
    "childrenWithProps",
    "className",
    "propTypes",
    "node",
    "PropTypes",
    "string",
    "bool",
    "func",
    "CustomInput",
    "displayName",
    "Input",
    "Dropdown",
    "SubmitButton",
    "ResetButton",
    "Wrapper"
  ],
  "mappings": "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",
  "file": "index.jsx",
  "sourceRoot": "../src/form",
  "sourcesContent": [
    "import React, { Component, PropTypes } from 'react';\nimport Input from './input';\nimport Dropdown from './dropdown';\nimport SubmitButton from './submit-button';\nimport ResetButton from './reset-button';\nimport Wrapper from './wrapper';\nimport CustomInput from './custom-input';\nimport { some } from 'lodash';\n\nclass Form extends Component {\n  static propTypes = {\n    children: PropTypes.node\n  }\n\n  constructor(props) {\n    super(props);\n\n    const inputs = {};\n\n    const getInput = (child) => {\n      const getDefaultValues = ({ valid, value }) => {\n        const defaults = {\n          valid: valid || false,\n          value: value || '',\n          dirty: false,\n          errorMessage: ''\n        };\n        return { ...defaults, defaults };\n      };\n      switch (child.type.name) {\n        case 'Wrapper':\n          if (child.props.children) {\n            if (child.props.children.length) {\n              for (const x in child.props.children) {\n                getInput(child.props.children[x]);\n              }\n            } else {\n              getInput(child.props.children);\n            }\n          }\n          break;\n        case 'Input':\n        case 'DropdownWrapper': inputs[child.props.name] = getDefaultValues(child.props); break;\n        case 'CustomInput':\n          const customInput = child.props.children;\n          inputs[customInput.props.name] = getDefaultValues(customInput.props);\n          break;\n      }\n    };\n\n    for (const x in this.props.children) {\n      getInput(this.props.children[x]);\n    }\n\n    this.state = { forceDirty: false, inputs };\n  }\n\n  componentWillReceiveProps({ resetForm }) {\n    if (this.props.resetForm != resetForm && resetForm) {\n      this.resetForm();\n      this.props.formWasResetted();\n    }\n  }\n\n  resetForm() {\n    const state = { ...this.state };\n    const inputs = state.inputs;\n    for (const input in state.inputs) {\n      const { valid, value, dirty } = this.state.inputs[input].defaults;\n      inputs[input] = { ...this.state.inputs[input], valid, value, dirty };\n    }\n    this.setState({ state, forceDirty: false });\n  }\n\n  getCommonMethods(props) {\n    const { name, validate, onChange } = props;\n    const { inputs, forceDirty } = this.state;\n    const { value, valid, dirty, errorMessage } = inputs[name];\n    return {\n      value, valid, dirty, errorMessage, forceDirty,\n      onChange: (value) => {\n        const state = { ...this.state };\n        state.inputs[name].value = value;\n        this.setState(state);\n        if (onChange) {\n          onChange(value);\n        }\n      },\n      validate: (value, extra = {}) => {\n        if (validate) {\n          const validateObj = validate(value, extra);\n          const state = { ...this.state };\n          state.inputs[name] = {\n            ...state.inputs[name],\n            valid: validateObj.valid,\n            errorMessage: validateObj.errorMessage,\n            dirty: true\n          };\n          this.setState({ state });\n          return validateObj;\n        } else {\n          return { valid: true, errorMessage: '' };\n        }\n      }\n    };\n  }\n\n  getComponent(children) {\n    return React.Children.map(children,\n      (child) => {\n        let component = child;\n        switch (child.type.name) {\n          case 'Wrapper':\n            component = (\n              <Wrapper {...child.props}>\n                {this.getComponent(child.props.children)}\n              </Wrapper>\n            );\n            break;\n          case 'SubmitButton':\n            component = React.cloneElement(child, {\n              disabled: child.props.disabledUntilFormIsValidated\n                ? some(this.state.inputs, (input) => !input.valid)\n                : false,\n              onClick: (event) => {\n                event.preventDefault();\n                const state = { ...this.state };\n                //check if all the inputs are valid\n                if (!some(state.inputs, (input) => !input.valid)) {\n                  const inputs = {};\n                  for (const input in state.inputs) {\n                    inputs[input] = state.inputs[input].value;\n                  }\n                  // proceed with the flow\n                  child.props.onClick({ ...inputs });\n                } else {\n                  const inputs = state.inputs;\n                  for (const input in inputs) {\n                    inputs[input] = { ...inputs[input], dirty: true };\n                  }\n                  this.setState({ ...state, forceDirty: true });\n                }\n              }\n            });\n            break;\n          case 'ResetButton':\n            component = React.cloneElement(child, {\n              onClick: (event) => {\n                event.preventDefault();\n                this.resetForm();\n                if (child.props.onClick) {\n                  child.props.onClick();\n                }\n              }\n            });\n            break;\n          case 'Input':\n          case 'DropdownWrapper':\n            component = React.cloneElement(child, this.getCommonMethods(child.props));\n            break;\n          case 'CustomInput':\n            const customInput = child.props.children;\n            component = React.cloneElement(customInput, this.getCommonMethods(customInput.props));\n            break;\n        }\n        return component;\n      }\n    );\n  }\n\n  render() {\n    const childrenWithProps = this.getComponent(this.props.children);\n    return (\n      <form className={this.props.className}>\n        {childrenWithProps}\n      </form>\n    );\n  }\n}\n\nForm.propTypes = {\n  className: React.PropTypes.string,\n  resetForm: React.PropTypes.bool,\n  formWasResetted: React.PropTypes.func\n};\n\nForm.CustomInput = CustomInput;\nForm.CustomInput.displayName = 'CustomInput';\n\nForm.Input = Input;\nForm.Input.displayName = 'Input';\n\nForm.Dropdown = Dropdown;\nForm.Dropdown.displayName = 'Dropdown';\n\nForm.SubmitButton = SubmitButton;\nForm.SubmitButton.displayName = 'SubmitButton';\n\n\nForm.ResetButton = ResetButton;\nForm.ResetButton.displayName = 'ResetButton';\n\nForm.Wrapper = Wrapper;\nForm.Wrapper.displayName = 'Wrapper';\n\nexport default Form;\n"
  ]
}
