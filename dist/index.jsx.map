{
  "version": 3,
  "sources": [
    "index.jsx"
  ],
  "names": [
    "Form",
    "props",
    "inputs",
    "getInput",
    "child",
    "getDefaultValues",
    "valid",
    "value",
    "validate",
    "defaults",
    "dirty",
    "errorMessage",
    "resetValue",
    "type",
    "name",
    "children",
    "length",
    "x",
    "customInput",
    "state",
    "forceDirty",
    "resetForm",
    "formWasResetted",
    "input",
    "setState",
    "onClick",
    "event",
    "preventDefault",
    "disabled",
    "disabledUntilFormIsValidated",
    "onChange",
    "extra",
    "validateObj",
    "valueWasResetted",
    "Children",
    "map",
    "component",
    "getComponent",
    "cloneElement",
    "getSubmitButtonProps",
    "getResetButtonProps",
    "porps",
    "getInputsCommonProps",
    "customSubmitButton",
    "customResetButton",
    "childrenWithProps",
    "className",
    "propTypes",
    "node",
    "PropTypes",
    "string",
    "bool",
    "func",
    "CustomInput",
    "displayName",
    "Input",
    "Dropdown",
    "SubmitButton",
    "CustomSubmitButton",
    "ResetButton",
    "CustomResetButton",
    "Wrapper"
  ],
  "mappings": "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",
  "file": "index.jsx",
  "sourceRoot": "../src/form",
  "sourcesContent": [
    "import React, { Component, PropTypes } from 'react';\nimport Input from './input';\nimport Dropdown from './dropdown';\nimport SubmitButton from './submit-button';\nimport ResetButton from './reset-button';\nimport Wrapper from './wrapper';\nimport CustomInput from './custom-input';\nimport CustomResetButton from './custom-reset-button';\nimport CustomSubmitButton from './custom-submit-button';\nimport { some } from 'lodash';\n\nclass Form extends Component {\n  static propTypes = {\n    children: PropTypes.node\n  }\n\n  constructor(props) {\n    super(props);\n\n    const inputs = {};\n\n    const getInput = (child) => {\n      const getDefaultValues = ({ valid, value, validate }) => {\n        const defaults = {\n          valid: valid || !validate,\n          value: value || '',\n          dirty: false,\n          errorMessage: ''\n        };\n        return { ...defaults, defaults, resetValue: false };\n      };\n      switch (child.type.name) {\n        case 'Wrapper':\n          if (child.props.children) {\n            if (child.props.children.length) {\n              for (const x in child.props.children) {\n                getInput(child.props.children[x]);\n              }\n            } else {\n              getInput(child.props.children);\n            }\n          }\n          break;\n        case 'Input':\n        case 'DropdownWrapper': inputs[child.props.name] = getDefaultValues(child.props); break;\n        case 'CustomInput':\n          const customInput = child.props.children;\n          inputs[customInput.props.name] = getDefaultValues(customInput.props);\n          break;\n      }\n    };\n\n    for (const x in this.props.children) {\n      getInput(this.props.children[x]);\n    }\n\n    this.state = { forceDirty: false, inputs };\n  }\n\n  componentWillReceiveProps({ resetForm }) {\n    if (this.props.resetForm != resetForm && resetForm) {\n      this.resetForm();\n      this.props.formWasResetted();\n    }\n  }\n\n  resetForm() {\n    const state = { ...this.state };\n    const inputs = state.inputs;\n    for (const input in state.inputs) {\n      const { valid, value, dirty } = this.state.inputs[input].defaults;\n      inputs[input] = {\n        ...this.state.inputs[input],\n        resetValue: true,\n        valid, value, dirty\n      };\n    }\n    this.setState({ state, forceDirty: false });\n  }\n\n  getResetButtonProps(props) {\n    return {\n      onClick: (event) => {\n        event.preventDefault();\n        this.resetForm();\n        if (props.onClick) {\n          props.onClick();\n        }\n      }\n    };\n  }\n\n  getSubmitButtonProps(props) {\n    return {\n      disabled: props.disabledUntilFormIsValidated\n        ? some(this.state.inputs, (input) => !input.valid)\n        : false,\n      onClick: (event) => {\n        event.preventDefault();\n        const state = { ...this.state };\n        //check if all the inputs are valid\n        if (!some(state.inputs, (input) => !input.valid)) {\n          const inputs = {};\n          for (const input in state.inputs) {\n            inputs[input] = state.inputs[input].value;\n          }\n          // proceed with the flow\n          props.onClick({ ...inputs });\n        } else {\n          const inputs = state.inputs;\n          for (const input in inputs) {\n            inputs[input] = { ...inputs[input], dirty: true };\n          }\n          this.setState({ ...state, forceDirty: true });\n        }\n      }\n    };\n  }\n\n  getInputsCommonProps(props) {\n    const { name, validate, onChange } = props;\n    const { inputs, forceDirty } = this.state;\n    const { value, valid, dirty, errorMessage, resetValue } = inputs[name];\n    return {\n      value, valid, dirty, errorMessage, forceDirty, resetValue,\n      onChange: (value) => {\n        const state = { ...this.state };\n        state.inputs[name].value = value;\n        this.setState(state);\n        if (onChange) {\n          onChange(value);\n        }\n      },\n      validate: (value, extra = {}) => {\n        const state = { ...this.state };\n        if (validate) {\n          const validateObj = validate(value, extra);\n          state.inputs[name] = {\n            ...state.inputs[name],\n            valid: validateObj.valid,\n            errorMessage: validateObj.errorMessage,\n            dirty: true\n          };\n        } else {\n          state.inputs[name] = {\n            ...state.inputs[name],\n            valid: true,\n            errorMessage: '',\n            dirty: true\n          };\n        }\n        this.setState({ state });\n      },\n      valueWasResetted: () => {\n        const state = { ...this.state };\n        state.inputs[name] = {\n          ...state.inputs[name],\n          resetValue: false\n        };\n        this.setState({ state });\n      }\n    };\n  }\n\n  getComponent(children) {\n    return React.Children.map(children,\n      (child) => {\n        let component = child;\n        switch (child.type.name) {\n          case 'Wrapper':\n            component = (\n              <Wrapper {...child.props}>\n                {this.getComponent(child.props.children)}\n              </Wrapper>\n            );\n            break;\n          case 'SubmitButton':\n            component = React.cloneElement(child, this.getSubmitButtonProps(child.props));\n            break;\n          case 'ResetButton':\n            component = React.cloneElement(child, this.getResetButtonProps(child.porps));\n            break;\n          case 'Input':\n          case 'DropdownWrapper':\n            component = React.cloneElement(child, this.getInputsCommonProps(child.props));\n            break;\n          case 'CustomInput':\n            const customInput = child.props.children;\n            component = React.cloneElement(customInput, this.getInputsCommonProps(customInput.props));\n            break;\n          case 'CustomSubmitButton':\n            const customSubmitButton = child.props.children;\n            component = React.cloneElement(customSubmitButton, this.getSubmitButtonProps(child.props));\n            break;\n          case 'CustomResetButton':\n            const customResetButton = child.props.children;\n            component = React.cloneElement(customResetButton, this.getResetButtonProps(child.props));\n            break;\n        }\n        return component;\n      }\n    );\n  }\n\n  render() {\n    const childrenWithProps = this.getComponent(this.props.children);\n    return (\n      <form className={this.props.className}>\n        {childrenWithProps}\n      </form>\n    );\n  }\n}\n\nForm.propTypes = {\n  className: React.PropTypes.string,\n  resetForm: React.PropTypes.bool,\n  formWasResetted: React.PropTypes.func\n};\n\nForm.CustomInput = CustomInput;\nForm.CustomInput.displayName = 'CustomInput';\n\nForm.Input = Input;\nForm.Input.displayName = 'Input';\n\nForm.Dropdown = Dropdown;\nForm.Dropdown.displayName = 'Dropdown';\n\nForm.SubmitButton = SubmitButton;\nForm.SubmitButton.displayName = 'SubmitButton';\n\nForm.CustomSubmitButton = CustomSubmitButton;\nForm.CustomSubmitButton.displayName = 'CustomSubmitButton';\n\nForm.ResetButton = ResetButton;\nForm.ResetButton.displayName = 'ResetButton';\n\nForm.CustomResetButton = CustomResetButton;\nForm.CustomResetButton.displayName = 'CustomResetButton';\n\nForm.Wrapper = Wrapper;\nForm.Wrapper.displayName = 'Wrapper';\n\nexport default Form;\n"
  ]
}
